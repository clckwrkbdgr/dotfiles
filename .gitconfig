# Sadly this file isn't recognized by git by default.
# Should be either added manually to .git/config, or include'd in .git/config:
# [include]
# 	path = <full path to repo>/.gitconfig
[include]
	path = .gitfilters

[filter "zipfile"]
	smudge = "zipdump load"
	clean = "zipdump dump"

[filter "windows_terminal_settings"]
	smudge = cat
	clean = "python -c \"import sys,json;data=sys.stdin.read();data=json.loads(data);BUILT_IN_SCHEMES=['Campbell', 'Campbell Powershell', 'One Half Dark', 'One Half Light', 'Solarized Dark', 'Solarized Light', 'Tango Dark', 'Tango Light', 'Vintage'];data['schemes'] = [scheme for scheme in data['schemes'] if scheme.get('name') not in BUILT_IN_SCHEMES];data='\\n'.join(map(str.rstrip, json.dumps(data,indent=4,sort_keys=True).splitlines()));(sys.stdout.buffer if hasattr(sys.stdout, 'buffer') else sys.stdout).write(data.encode('utf-8', 'replace')+b'\\n')\""

# action=1 => AlwaysAsk
[filter "firefox_handlers_json"]
	smudge = cat
	clean = "python -c 'import sys,json; data = json.loads(sys.stdin.read()); data[\"mimeTypes\"] = dict( (key,dict( (k,v if k != \"action\" else 1) for k,v in value.items() if k != \"ask\")) for key,value in data[\"mimeTypes\"].items()); print(json.dumps(data, indent=4, sort_keys=True))'"

[filter "firefox_addons_json"]
	smudge = cat
	clean = "clean-firefox-addons.py addons"

[filter "firefox_extensions_json"]
	smudge = cat
	clean = "clean-firefox-addons.py extensions"

[filter "firefox_pref_js"]
	smudge = clean-firefox-prefs.sh --restore
	clean = clean-firefox-prefs.sh

[filter "firefox_userscript_config"]
	smudge = clean-firefox-userscripts.sh --restore
	clean = clean-firefox-userscripts.sh

[filter "expand_homedir"]
	smudge = "sed 's|$HOME|'\"$HOME\"'|g'"
	clean = "sed 's|'\"$HOME\"'|$HOME|g'"

[filter "freeciv_rc"]
	smudge = clean-freeciv-rc.sh --restore
	clean = clean-freeciv-rc.sh

[filter "openttd_config"]
	smudge = clean-openttd-cfg.sh --restore
	clean = clean-openttd-cfg.sh

[filter "gimp_menurc"]
	smudge = cat
	clean = "sort | sed '/^(gtk_accel_path \"<Actions>\\/windows\\/windows-display-[0-9]\\+\" \"<Alt>[0-9]\\+\")/d'"

[filter "gimp_pluginrc"]
	smudge = cat
	clean = "sed 's/^\\((plug-in-def \"[^\"]\\+\"\\) [0-9]\\+/\\1 0/g'"

[filter "git_config"]
	smudge = "python ~/.config/git/git_config_submodule_diff_option.py smudge"
	clean = "python ~/.config/git/git_config_submodule_diff_option.py clean"

# TODO to filterconf
[filter "svn_config"]
	smudge = cat
	clean = "sed '/### <INCLUDE/,/### >INCLUDE/d;' | sed '${/^$/d}'"
