<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<script type="application/javascript" src="../unittest.js"></script>
	<script type="application/javascript" src="../utils.js"></script>
	<script type="application/javascript" src="../ui.js"></script>
</head>
<body onload="clckwrkbdgr.unittest.run('should_')">
	<noscript>
		Failed: Javascript is needed to be turned ON to test Javascript functionality!
	</noscript>
	<div id="unittest-main">
	</div>

	<div id="test-area">
	</div>

<script type="application/javascript">
	console.log('Creating manual testing layout...');

	clckwrkbdgr.ui.create_gui_container('#test-area', {
		id: 'manual-gui-div-container',
		class_name: 'manual-gui-container',
		style: 'border: 1px solid #666; background: #222; min-width: 300px; min-height: 100px;',
	}, [
		{type: 'menu_item', args: [
			'Manual menu item',
			function(el) {
				if(el.innerText.match(/<on>/)) {
					el.innerText = 'Manual menu item <off>';
				} else {
					el.innerText = 'Manual menu item <on>';
				}
				console.log(el.innerText);
			},
			{
				id: 'manual-menu-item',
				class_name: 'manual-control',
				style: 'border: 1px solid #063; background: #333',
			},
		]},
	]);

	clckwrkbdgr.ui.create_gui_container('#test-area', {
		type: 'ul',
		id: 'manual-gui-list-container',
		class_name: 'manual-gui-container',
		style: 'border: 1px solid #933; background: #233; min-width: 100px; max-width: 500px; min-height: 10px;',
		prepend: true,
	}, [
		{type: 'info_item', args: [
			'Manual info item',
			{
				id: 'manual-info-item-li',
				class_name: 'manual-control',
				style: 'border: 1px dotted #f3f; background: #133',
			},
		]},
		{type: 'info_item', args: [
			'Manual info item (blockquote)',
			{
				type: 'blockquote',
				id: 'manual-info-item-blockquote',
				class_name: 'manual-control',
				style: 'border: 1px dotted #3f3; background: #313',
			},
		]},
	]);

</script>

<script type="application/javascript">
var unittest = clckwrkbdgr.unittest;

function setUp()
{
	unittest.assertTrue(window.clckwrkbdgr);
	unittest.assertTrue(window.clckwrkbdgr.ui);
}

function should_create_empty_container()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container(test_area, {
		id: 'clckwrkbdgr-test-empty-container'
	});
	var container = document.querySelector('#clckwrkbdgr-test-empty-container');
	unittest.assertTrue(container);

	test_area.removeChild(container);
}

function should_prepend_container_to_the_root_element()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container(test_area, {
		prepend: true,
		id: 'clckwrkbdgr-test-container-prepend'
	});
	var container = document.querySelector('#clckwrkbdgr-test-container-prepend');
	unittest.assertTrue(container);

	test_area.removeChild(container);
}

function should_create_container_in_root_element_by_query()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container('div#test-area', {
		id: 'clckwrkbdgr-test-container-by-query'
	});
	var container = document.querySelector('#clckwrkbdgr-test-container-by-query');
	unittest.assertTrue(container);

	test_area.removeChild(container);
}

function should_create_container_with_class()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container(test_area, {
		class_name: 'clckwrkbdgr-test-container',
		id: 'clckwrkbdgr-test-container-with-class'
	});
	var container = document.querySelector('#clckwrkbdgr-test-container-with-class');
	unittest.assertTrue(container);
	unittest.assertEqual(container.classList[0], 'clckwrkbdgr-test-container');

	test_area.removeChild(container);
}

function should_create_container_with_style()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container(test_area, {
		style: 'background-color: red',
		id: 'clckwrkbdgr-test-container-with-style'
	});
	var container = document.querySelector('#clckwrkbdgr-test-container-with-style');
	unittest.assertTrue(container);
	unittest.assertEqual(container.style['background-color'], 'red');

	test_area.removeChild(container);
}

function should_create_container_with_controls()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container(test_area, {
		id: 'clckwrkbdgr-test-container-with-controls'
	}, [
		{type: 'info_item', args: ['Hello world', {id: 'clckwrkbdgr-test-container-with-controls-subcontrol'}]}
	]);
	var container = document.querySelector('div#clckwrkbdgr-test-container-with-controls');
	unittest.assertTrue(container);
	var subcontrol = document.querySelector('#clckwrkbdgr-test-container-with-controls-subcontrol');
	unittest.assertTrue(subcontrol);
	var subcontrol_parent = subcontrol.parentElement;
	unittest.assertEqual(subcontrol_parent, container);

	test_area.removeChild(container);
}

function should_create_container_of_unordered_list_with_controls()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container(test_area, {
		type: 'ul',
		id: 'clckwrkbdgr-test-container-ul-with-controls'
	}, [
		{type: 'info_item', args: ['Hello world', {id: 'clckwrkbdgr-test-container-ul-with-controls-subcontrol'}]}
	]);
	var container = document.querySelector('ul#clckwrkbdgr-test-container-ul-with-controls');
	unittest.assertTrue(container);
	var subcontrol = document.querySelector('#clckwrkbdgr-test-container-ul-with-controls-subcontrol');
	unittest.assertTrue(subcontrol);
	var subcontrol_parent = subcontrol.parentElement;
	unittest.assertEqual(subcontrol_parent.nodeName, 'LI');

	test_area.removeChild(container);
}

function should_create_container_as_list_item_with_controls()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container(test_area, {
		type: 'li',
		id: 'clckwrkbdgr-test-container-li-with-controls'
	}, [
		{type: 'info_item', args: ['Hello world', {id: 'clckwrkbdgr-test-container-li-with-controls-subcontrol'}]}
	]);
	var container = document.querySelector('li#clckwrkbdgr-test-container-li-with-controls');
	unittest.assertTrue(container);
	var subcontrol = document.querySelector('#clckwrkbdgr-test-container-li-with-controls-subcontrol');
	unittest.assertTrue(subcontrol);
	var subcontrol_parent = subcontrol.parentElement;
	unittest.assertEqual(subcontrol_parent, container);

	test_area.removeChild(container);
}

function should_create_menu_item()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container(test_area, {
		class_name: 'clckwrkbdgr-test-container',
		id: 'clckwrkbdgr-test-container-with-class'
	}, [
		{type: 'menu_item', args: [
			'Click me',
			function(el) {
				el.innerText = 'Clicked';
			},
			{
				id: 'clckwrkbdgr-test-menu-item',
				class_name: 'clckwrkbdgr-test-menu-item-class',
				style: 'background-color: red',
			}
		]}
	]);
	var container = document.querySelector('#clckwrkbdgr-test-container-with-class');

	var subcontrol = document.querySelector('#clckwrkbdgr-test-menu-item');
	unittest.assertTrue(subcontrol);
	var subcontrol_parent = subcontrol.parentElement;
	unittest.assertEqual(subcontrol_parent, container);

	unittest.assertEqual(subcontrol.classList[0], 'clckwrkbdgr-test-menu-item-class');
	unittest.assertEqual(subcontrol.style['background-color'], 'red');
	unittest.assertEqual(subcontrol.innerText, 'Click me');
	subcontrol.click();
	unittest.assertEqual(subcontrol.innerText, 'Clicked');

	test_area.removeChild(container);
}

function should_create_info_item()
{
	var test_area = document.querySelector('div#test-area');
	clckwrkbdgr.ui.create_gui_container(test_area, {
		class_name: 'clckwrkbdgr-test-container',
		id: 'clckwrkbdgr-test-container-with-class'
	}, [
		{type: 'info_item', args: [
			'Hello world',
			{
				id: 'clckwrkbdgr-test-info-item',
				class_name: 'clckwrkbdgr-test-info-item-class',
				style: 'background-color: red',
			}
		]}
	]);
	var container = document.querySelector('#clckwrkbdgr-test-container-with-class');

	var subcontrol = document.querySelector('#clckwrkbdgr-test-info-item');
	unittest.assertTrue(subcontrol);
	var subcontrol_parent = subcontrol.parentElement;
	unittest.assertEqual(subcontrol_parent, container);

	unittest.assertEqual(subcontrol.classList[0], 'clckwrkbdgr-test-info-item-class');
	unittest.assertEqual(subcontrol.style['background-color'], 'red');
	unittest.assertEqual(subcontrol.innerText, 'Hello world');

	test_area.removeChild(container);
}

</script>

</body>
</html>
